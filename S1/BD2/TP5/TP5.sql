--SELECT * FROM CAT;
SELECT CAT.TABLE_NAME,NUM_ROWS FROM ALL_TABLES
JOIN CAT ON ALL_TABLES.TABLE_NAME=CAT.TABLE_NAME
WHERE ALL_TABLES.TABLE_NAME='ABONNE';--NBR VALEURS

SELECT COLS.TABLE_NAME,COUNT(COLUMN_NAME) AS NBR_ATTRIBUTS FROM COLS WHERE TABLE_NAME='ABONNE' GROUP BY COLS.TABLE_NAME;--NBR ATTRIBUTS

SELECT TABLE_NAME,CONSTRAINT_NAME,STATUS FROM USER_CONSTRAINTS;

SELECT TABLE_NAME,CONSTRAINT_NAME,STATUS FROM USER_CONSTRAINTS WHERE CONSTRAINT_TYPE='P';


--EXO 2
GRANT SELECT ON ABONNE TO e20190005507;
GRANT SELECT ON LIVRE TO e20190005507;
GRANT INSERT ON LIVRE TO e20190005507;

SELECT * FROM e20190005507.ABONNE;
SELECT GRANTEE,PRIVILEGE FROM USER_TAB_PRIVS WHERE GRANTEE='E20190005507';

UPDATE e20190005507.LIVRE
SET TITRE='LA POUTCH'
WHERE TITRE='LA PERLE';

REVOKE SELECT ON ABONNE FROM e20190005507;
REVOKE SELECT ON LIVRE FROM e20190005507;
REVOKE INSERT ON LIVRE FROM e20190005507;

--3
--On n'a plus la vue, comme si elle n'avait jamais exist√©

GRANT ALL ON ABONNE TO e20190005507;
SELECT NOM,PRENOM FROM E20190005507.ABONNE;

UPDATE ABONNE
SET NOM='DUPONT'
WHERE NOM='DUPOND';

UPDATE LIVRE
SET CATEGORIE='OH DOUCEMENT'
WHERE CATEGORIE='ROMAN';

UPDATE ABONNE
SET PRENOM='PIERRE'
WHERE PRENOM='FDP';